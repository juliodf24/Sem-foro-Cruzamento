#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <unistd.h>

void print_estagio0(){
            printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                  游댮丘쀮잺丘쀮잺   |\n");
        printf("_________________________________|                           |______________________________________\n");
        printf("                              丘쀮잺\n");
        printf("                              丘쀮잺\n");
        printf("                              游댮\n");
        printf("\n");
        printf("\n");
        printf("\n");
        printf("\n");
        printf("_________________________________                            ______________________________________\n");
        printf("                                 |             |             |\n");
        printf("                                 |                   游댮丘쀮잺丘쀮잺  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
}

void print_estagio1(int estado){
    if(estado == 0){
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                  游댮丘쀮잺丘쀮잺   |\n");
        printf("_________________________________|                           |______________________________________\n");
        printf("                              丘쀮잺\n");
        printf("                              游리\n");
        printf("                              丘쀮잺\n");
        printf("     ------------------------------------------------------------------>\n");
        printf("                                           |\n");
        printf("                                           |\n");
        printf("                                           |\n");
        printf("_________________________________          |                 ______________________________________\n");
        printf("                                 |         |   |             |\n");
        printf("                                 |         V         游댮丘쀮잺丘쀮잺  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
    }else if(estado==1){
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                  游댮丘쀮잺丘쀮잺   |\n");
        printf("_________________________________|                           |______________________________________\n");
        printf("                              游릭\n");
        printf("                              丘쀮잺\n");
        printf("                              丘쀮잺\n");
        printf("     ------------------------------------------------------------------>\n");
        printf("                                           |\n");
        printf("                                           |\n");
        printf("                                           |\n");
        printf("_________________________________          |                 ______________________________________\n");
        printf("                                 |         |   |             |\n");
        printf("                                 |         V         游댮丘쀮잺丘쀮잺  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
    }

}
void print_estagio2(int estado){
    if(estado == 0){
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |         |                 |\n");
        printf("                                 |         |        丘쀮잺游리丘쀮잺   |\n");
        printf("_________________________________|         |                 |______________________________________\n");
        printf("                              丘쀮잺           | \n");
        printf("                              丘쀮잺           |\n");
        printf("                              游댮           |\n");
        printf("                                           |\n");
        printf("                                           |-------------------------->\n");
        printf("                                           |\n");
        printf("                                           |\n");
        printf("_________________________________          |                 ______________________________________\n");
        printf("                                 |         |   |             |\n");
        printf("                                 |         V         游댮丘쀮잺丘쀮잺  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
    }else if(estado == 1){
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |                           |\n");
            printf("                                 |         |                 |\n");
            printf("                                 |         |        丘쀮잺丘쀮잺游릭   |\n");
            printf("_________________________________|         |                 |______________________________________\n");
            printf("                              丘쀮잺           | \n");
            printf("                              丘쀮잺           |\n");
            printf("                              游댮           |\n");
            printf("                                           |\n");
            printf("                                           |-------------------------->\n");
            printf("                                           |\n");
            printf("                                           |\n");
            printf("_________________________________          |                 ______________________________________\n");
            printf("                                 |         |   |             |\n");
            printf("                                 |         V         游댮丘쀮잺丘쀮잺  |\n");
            printf("                                 |             |             |\n");
            printf("                                 |                           |\n");
            printf("                                 |             |             |\n");
            printf("                                 |                           |\n");
            printf("                                 |             |             |\n");
            printf("                                 |                           |\n");
            printf("                                 |             |             |\n");
            printf("                                 |                           |\n");
            printf("                                 |             |             |\n");
    }

}
void print_estagio3(int estado){
    if(estado ==0){
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                  游댮丘쀮잺丘쀮잺   |\n");
        printf("_________________________________|                           |______________________________________\n");
        printf("                              丘쀮잺\n");
        printf("                              丘쀮잺\n");
        printf("                              游댮\n");
        printf("                                                        ------------------------ >\n");
        printf("                                                        |\n");
        printf("                                                        |\n");
        printf("                                                        |\n");
        printf("_________________________________                       |    ______________________________________\n");
        printf("                                 |             |             |\n");
        printf("                                 |                   丘쀮잺游리丘쀮잺  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                      |    |\n");
        printf("                                 |             |        |    |\n");
        printf("                                 |                      |    |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
    } else if(estado == 1){
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                           |\n");
        printf("                                 |                  游댮丘쀮잺丘쀮잺   |\n");
        printf("_________________________________|                           |______________________________________\n");
        printf("                              丘쀮잺\n");
        printf("                              丘쀮잺\n");
        printf("                              游댮\n");
        printf("                                                        ------------------------ >\n");
        printf("                                                        |\n");
        printf("                                                        |\n");
        printf("                                                        |\n");
        printf("_________________________________                       |    ______________________________________\n");
        printf("                                 |             |             |\n");
        printf("                                 |                   丘쀮잺丘쀮잺游릭  |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                      |    |\n");
        printf("                                 |             |        |    |\n");
        printf("                                 |                      |    |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
        printf("                                 |                           |\n");
        printf("                                 |             |             |\n");
    }

}

int main() {
    int tempo_vermelho = 55;
    int tempo_amarelo = 5;
    int tempo_verde = 15;

    char gm1_sinal[16] = "Verde";
    int gm1_tempo = tempo_verde;

    char gm2_sinal[16] = "Vermelho";
    int gm2_tempo = 25;

    char gm3_sinal[16] = "Vermelho";
    int gm3_tempo = 50;


    while(true){
        system("clear");
        //gm1
        if(strcmp(gm1_sinal, "Verde") == 0){
            if(gm1_tempo < 1){
                strcpy(gm1_sinal, "Amarelo");
                gm1_tempo = tempo_amarelo;
                print_estagio1(0);
            } else{
                gm1_tempo--;
                print_estagio1(1);
            }   
        } else if(strcmp(gm1_sinal, "Amarelo") == 0){
            if(gm1_tempo < 1){
                strcpy(gm1_sinal, "Vermelho");
                gm1_tempo = tempo_vermelho;
            } else{
                gm1_tempo--;
                print_estagio1(0);
            }   
        } else {
            if(strcmp(gm1_sinal, "Vermelho") != 0){
                strcpy(gm1_sinal, "Vermelho");
                gm1_tempo = tempo_vermelho;
            } else if(gm1_tempo < 1){
                strcpy(gm1_sinal, "Verde");
                gm1_tempo = tempo_verde;
                continue;

            }
            gm1_tempo--;
        }
        //gm2
        if(strcmp(gm2_sinal, "Verde") == 0){
            if(gm2_tempo < 1){
                strcpy(gm2_sinal, "Amarelo");
                gm2_tempo = tempo_amarelo;
                print_estagio2(0);
            } else{
                gm2_tempo--;
                print_estagio2(1);
            }   
        } else if(strcmp(gm2_sinal, "Amarelo") == 0){
            if(gm2_tempo < 1){
                strcpy(gm2_sinal, "Vermelho");
                gm2_tempo = tempo_vermelho;
            } else{
                gm2_tempo--;
                print_estagio2(0);
            }   
        } else {
            if(strcmp(gm2_sinal, "Vermelho") != 0){
                strcpy(gm2_sinal, "Vermelho");
                gm2_tempo = tempo_vermelho;
            } else if(gm2_tempo < 1){
                strcpy(gm2_sinal, "Verde");
                gm2_tempo = tempo_verde;
                continue;
            }
            gm2_tempo--;
        }
        //gm3
        if(strcmp(gm3_sinal, "Verde") == 0){
            if(gm3_tempo < 1){
                strcpy(gm3_sinal, "Amarelo");
                gm3_tempo = tempo_amarelo;
                print_estagio3(0);
            } else{
                gm3_tempo--;
                print_estagio3(1);
            }   
        } else if(strcmp(gm3_sinal, "Amarelo") == 0){
            if(gm3_tempo < 1){
                strcpy(gm3_sinal, "Vermelho");
                gm3_tempo = tempo_vermelho;
            } else{
                gm3_tempo--;
                print_estagio3(0);
            }   
        } else {
            if(strcmp(gm3_sinal, "Vermelho") != 0){
                strcpy(gm3_sinal, "Vermelho");
                gm3_tempo = tempo_vermelho;
            } else if(gm3_tempo < 1){
                strcpy(gm3_sinal, "Verde");
                gm3_tempo = tempo_verde;
                continue;
            }
            gm3_tempo--;
        }

        if(strcmp(gm1_sinal, "Vermelho") == 0 && strcmp(gm2_sinal, "Vermelho") == 0 && strcmp(gm3_sinal, "Vermelho") == 0){
            print_estagio0();
        }
        printf("gm1: Sinal %s, %d s para troca de sinal\n", gm1_sinal, gm1_tempo);
        printf("gm2: Sinal %s, %d s para troca de sinal\n", gm2_sinal, gm2_tempo);
        printf("gm3: Sinal %s, %d s para troca de sinal\n", gm3_sinal, gm3_tempo);
        sleep(1);
    }
    return 0;
}
